@model HeyTeam.Web.Models.EventAttendanceModel
<h1>@($"{Model.Title}")</h1>
<h3>Attendance</h3>
<span class="text-info">@($"{Model.EventType} {Model.StartDate.ToString("ddd dd-MMM-yyyy h:mm t")}M")<br />@($"{Model.Location}")</span>
<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Squad</th>
                <th>Player</th>
                <th class="text-center">Present <span class="glyphicon glyphicon-ok-sign"></span></th>
                <th class="text-center">Late <span class="glyphicon glyphicon-time"></span></th>
                <th class="text-center">Left Early <span class="glyphicon glyphicon-exclamation-sign"></span></th>
                <th class="text-center">No Show <span class="glyphicon glyphicon-remove-sign"></span></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var player in Model.EventPlayers) {
                <tr data-eventid="@player.EventGuid" data-squadid="@player.SquadGuid" data-playerid="@player.PlayerGuid">
                    <td>@player.SquadName</td>
                    <td>@player.PlayerName</td>
                    <td class="text-center"><button data-attendanceid="1" data-state="@(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.Present ? 1 : 0)" class="attendance btn @(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.Present ? "btn-success" : "btn-default")" title="Present"><span class="glyphicon glyphicon-ok-sign"></span></button></td>                    
                    <td class="text-center"><button data-attendanceid="3" data-state="@(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.Late ? 1 : 0)" class="attendance btn @(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.Late ? "btn-warning" : "btn-default")" title="Late"><span class="glyphicon glyphicon-time"></span></button></td>
                    <td class="text-center"><button data-attendanceid="4" data-state="@(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.LeftEarly ? 1 : 0)" class="attendance btn @(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.LeftEarly ? "btn-info" : "btn-default")" title="Left Early"><span class="glyphicon glyphicon-exclamation-sign"></span></button></td>
                    <td class="text-center"><button data-attendanceid="2" data-state="@(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.NoShow ? 1 : 0)" class="attendance btn @(player.Attendance.HasValue && player.Attendance == HeyTeam.Core.Attendance.NoShow ? "btn-danger" : "btn-default")" title="No Show"><span class="glyphicon glyphicon-remove-sign"></span></button></td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <script src="~/js/attendance.js"></script>
    <script type="text/javascript">
        bindEvents('button.attendance');
    </script>
}